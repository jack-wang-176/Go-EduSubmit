è¿™æ˜¯ä¸€ä»½ä¸ºæ‚¨é‡èº«å®šåˆ¶çš„ `README.md` æ–‡æ¡£ã€‚å®ƒç»“åˆäº†æˆ‘ä»¬åœ¨æ•´ä¸ªå¯¹è¯ä¸­è§£å†³çš„æŠ€æœ¯éš¾ç‚¹ï¼ˆå¦‚ Handler å±‚ DTO è½¬æ¢ã€ä¹è§‚é”ã€GORM å…³è”æŸ¥è¯¢ã€åˆ†é¡µé€»è¾‘ç­‰ï¼‰ï¼Œå¹¶é‡‡ç”¨äº†ä¸“ä¸šçš„å¼€æºé¡¹ç›®æ ¼å¼ã€‚

æ‚¨å¯ä»¥ç›´æ¥å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `README.md` æ–‡ä»¶ä¸­ã€‚

---

# ğŸ“š Go-EduSubmit

> **Go-EduSubmit** æ˜¯ä¸€ä¸ªåŸºäº Go (Gin + GORM) æ„å»ºçš„é«˜æ€§èƒ½ä½œä¸šæäº¤ä¸æ‰¹æ”¹ç³»ç»Ÿåç«¯ã€‚å®ƒä¸“æ³¨äºè§£å†³å¤æ‚çš„å…³è”æ•°æ®æŸ¥è¯¢ä¸å¹¶å‘æ‰¹æ”¹å†²çªé—®é¢˜ï¼Œæä¾›æ¸…æ™°ã€è§„èŒƒçš„ RESTful APIã€‚

[English](https://www.google.com/search?q=%23-english-introduction) | [ä¸­æ–‡ä»‹ç»](https://www.google.com/search?q=%23-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D)

---

## ğŸ“– é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®æ—¨åœ¨ä¸ºé«˜æ ¡æˆ–æ•™è‚²æœºæ„æä¾›ä¸€ä¸ªç¨³å¥çš„ä½œä¸šç®¡ç†åç«¯ã€‚å®ƒä¸ä»…å®ç°äº†åŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼Œè¿˜é’ˆå¯¹å®é™…ä¸šåŠ¡åœºæ™¯è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼š

* **æ•°æ®æ¸…æ´— (DTO)**ï¼šåœ¨ Handler å±‚å®ç°äº†çµæ´»çš„æ•°æ®è½¬æ¢ï¼ˆData Transfer Objectï¼‰ï¼Œæ‹’ç»å‘å‰ç«¯è¿”å›æ•°æ®åº“çš„â€œè„æ•°æ®â€ï¼ˆå¦‚é›¶å€¼æ—¶é—´ã€ç©ºå¯¹è±¡ï¼‰ï¼Œåªè¿”å›å‰ç«¯éœ€è¦çš„åµŒå¥—ç»“æ„ï¼ˆå¦‚ `homework` ä¸ `student` ä¿¡æ¯ï¼‰ã€‚
* **å¹¶å‘æ§åˆ¶ (Optimistic Locking)**ï¼šåœ¨æ‰¹æ”¹ä½œä¸šæ—¶å¼•å…¥**ä¹è§‚é”**æœºåˆ¶ï¼ˆåŸºäº `version` ç‰ˆæœ¬å·ï¼‰ï¼Œæœ‰æ•ˆé˜²æ­¢å¤šååŠ©æ•™åŒæ—¶ä¿®æ”¹åŒä¸€ä»½ä½œä¸šå¯¼è‡´çš„æ•°æ®è¦†ç›–é—®é¢˜ã€‚
* **å…³è”æŸ¥è¯¢ä¼˜åŒ–**ï¼šç†Ÿç»ƒè¿ç”¨ GORM çš„ `Preload` æœºåˆ¶ï¼Œé«˜æ•ˆå¤„ç† Userã€Homeworkã€Submission ä¸‰è¡¨å…³è”ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ (Features)

### ğŸ‘¨â€ğŸ“ å­¦ç”Ÿç«¯ (Student)

* **ä½œä¸šæäº¤**ï¼šæ”¯æŒæ–‡æœ¬å†…å®¹ä¸æ–‡ä»¶é“¾æ¥æäº¤ã€‚
* **æäº¤å†å² (`/mysub`)**ï¼š
* æŸ¥çœ‹è‡ªå·±çš„æäº¤è®°å½•ã€‚
* **æ¥å£ç‰¹ç‚¹**ï¼šè¿”å›ç»“æœä¸­åµŒå¥—ç®€åŒ–çš„ `homework` ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€éƒ¨é—¨ï¼‰ï¼Œå±è”½æ— å…³å­—æ®µã€‚



### ğŸ‘©â€ğŸ« æ•™å¸ˆ/ç®¡ç†å‘˜ç«¯ (Admin)

* **ä½œä¸šæ¦‚è§ˆ (`/submission/homework/:id`)**ï¼š
* æŸ¥çœ‹ç‰¹å®šä½œä¸šä¸‹çš„æ‰€æœ‰å­¦ç”Ÿæäº¤ã€‚
* **æ¥å£ç‰¹ç‚¹**ï¼šè¿”å›ç»“æœä¸­åµŒå¥— `student` ä¿¡æ¯ï¼ˆæ˜µç§°ã€éƒ¨é—¨ï¼‰ï¼Œæ–¹ä¾¿è€å¸ˆç¡®è®¤èº«ä»½ã€‚


* **åœ¨çº¿æ‰¹æ”¹ (`/submission/:id/review`)**ï¼š
* æ”¯æŒè¯„åˆ† (Score)ã€è¯„è¯­ (Comment) åŠä¼˜ç§€æ ‡è®°ã€‚
* **æŠ€æœ¯äº®ç‚¹**ï¼šä½¿ç”¨ CAS (Compare-And-Swap) æ€æƒ³å®ç°ä¹è§‚é”ï¼Œä¿éšœæ•°æ®ä¸€è‡´æ€§ã€‚


* **ä¼˜ç§€ä½œä¸šç®¡ç† (`/excellent`)**ï¼š
* ä¸€é”®æ ‡è®°/å–æ¶ˆä¼˜ç§€ä½œä¸šã€‚
* å…¬å…±å±•ç¤ºæ¥å£ï¼Œæ”¯æŒæŒ‰éƒ¨é—¨ç­›é€‰ã€‚



## ğŸ›  æŠ€æœ¯æ ˆ (Tech Stack)

* **è¯­è¨€**: Go (Golang) 1.25
* **Web æ¡†æ¶**: Gin
* **ORM**: GORM v2
* **æ•°æ®åº“**: MySQL 8.0
* **é…ç½®**: Viper (å¯é€‰)
* **å·¥å…·åŒ…**: è‡ªå®šä¹‰é”™è¯¯å¤„ç† (pkg/errors)

## ğŸ“‚ é¡¹ç›®ç»“æ„ (Structure)

éµå¾ªæ ‡å‡†çš„ Go é¡¹ç›®åˆ†å±‚æ¶æ„ï¼ŒèŒè´£å•ä¸€ï¼Œæ˜“äºç»´æŠ¤ã€‚

```text
.
â”œâ”€â”€ cmd/                # å¯åŠ¨å…¥å£ (Main application entry)
â”œâ”€â”€ dao/                # æ•°æ®è®¿é—®å±‚ (GORM operations & SQL)
â”œâ”€â”€ handler/            # æ§åˆ¶å±‚ (Request binding, DTO conversion, Response)
â”œâ”€â”€ model/              # æ•°æ®åº“æ¨¡å‹ (Database structs & hooks)
â”œâ”€â”€ pkg/                # å…¬å…±å·¥å…· (Error codes, Response wrapper)
â”œâ”€â”€ router/             # è·¯ç”±å®šä¹‰ (Gin router setup)
â””â”€â”€ service/            # ä¸šåŠ¡é€»è¾‘å±‚ (Business logic & Transactions)

```

## ğŸ“ API æ¥å£æ¦‚è§ˆ (API Overview)

### 1. è·å–æˆ‘çš„æäº¤ (My Submissions)

* **Endpoint**: `GET /submission/mysub`
* **Response**:
```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": 100,
        "homework": { "id": 1, "title": "Go Concurrency", "department_label": "åç«¯" },
        "score": 95,
        "submitted_at": "2026-02-07 18:00:00"
      }
    ],
    "total": 1
  }
}

```



### 2. æ‰¹æ”¹ä½œä¸š (Review Submission)

* **Endpoint**: `PUT /submission/:id/review`
* **Body**:
```json
{
  "score": 90,
  "comment": "Good job!",
  "is_excellent": true
}

```


* **Logic**: æ£€æŸ¥ç‰ˆæœ¬å·ï¼ŒåŸå­æ›´æ–°åˆ†æ•°ä¸çŠ¶æ€ã€‚

### 3. è·å–ä¼˜ç§€ä½œä¸šå¹¿åœº (Excellent Gallery)

* **Endpoint**: `GET /submission/excellent`
* **Query**: `page=1&page_size=10`
* **Response**: åŒæ—¶åŒ…å« `homework` (é¢˜ç›®) å’Œ `student` (ä½œè€…) çš„å®Œæ•´åµŒå¥—ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/your-username/Go-EduSubmit.git

```


2. **é…ç½®æ•°æ®åº“**
   åœ¨ MySQL ä¸­åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ DSNã€‚
3. **è¿è¡Œé¡¹ç›®**
```bash
go mod tidy
go run cmd/main.go

```


*é¡¹ç›®å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨è¿è¡Œ `AutoMigrate` è¿ç§»æ•°æ®åº“è¡¨ç»“æ„ã€‚*
4. **æ•°æ®åº“è¡¥ä¸ (Optional)**
   å¦‚æœé‡åˆ° `reviewed_at` å­—æ®µç¼ºå¤±æŠ¥é”™ï¼Œè¯·æ‰§è¡Œï¼š
```sql
ALTER TABLE submissions ADD COLUMN reviewed_at DATETIME NULL COMMENT 'æ‰¹æ”¹æ—¶é—´';

```



## ğŸ¤ è´¡çŒ® (Contribution)

æ¬¢è¿æäº¤ Issue æˆ– Pull Request æ¥æ”¹è¿›æœ¬é¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯ (License)

[MIT License](https://www.google.com/search?q=LICENSE)
